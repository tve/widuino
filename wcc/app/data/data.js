(function() {
  var dataCtrl, ng;

  ng = angular.module('myApp');

  ng.config(function($stateProvider, navbarProvider) {
    $stateProvider.state('data', {
      url: '/data/:table',
      templateUrl: '/data/data.html',
      controller: dataCtrl
    });
    return navbarProvider.add('/data/', 'Data', 35);
  });

  dataCtrl = function($scope, $stateParams, $location, jeebus) {
    var setup;
    setup = function() {
      return $scope.tables = jeebus.attach('table').on('sync', function() {
        $scope.colInfo = this.get($scope.table).attr.split(' ');
        return $scope.columns = jeebus.attach("column/" + $scope.table).on('sync', function() {
          return $scope.data = jeebus.attach($scope.table);
        });
      });
    };
    $scope.changeTable = function(t) {
      $scope.cursor = null;
      $scope.table = t || 'table';
      $location.path("/data/" + $scope.table);
      if ($scope.serverStatus === 'connected') {
        return setup();
      }
    };
    $scope.editRow = function(row) {
      return $scope.cursor = row;
    };
    $scope.deleteRow = function() {
      if ($scope.allowDelete && ($scope.cursor != null)) {
        $scope.allowDelete = false;
        return console.log('DELETE', $scope.table, $scope.cursor);
      }
    };
    $scope.$on('ws-open', setup);
    return $scope.changeTable($stateParams.table);
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGF0YS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLFlBQUE7O0FBQUEsRUFBQSxFQUFBLEdBQUssT0FBTyxDQUFDLE1BQVIsQ0FBZSxPQUFmLENBQUwsQ0FBQTs7QUFBQSxFQUVBLEVBQUUsQ0FBQyxNQUFILENBQVUsU0FBQyxjQUFELEVBQWlCLGNBQWpCLEdBQUE7QUFDUixJQUFBLGNBQWMsQ0FBQyxLQUFmLENBQXFCLE1BQXJCLEVBQ0U7QUFBQSxNQUFBLEdBQUEsRUFBSyxjQUFMO0FBQUEsTUFDQSxXQUFBLEVBQWEsaUJBRGI7QUFBQSxNQUVBLFVBQUEsRUFBWSxRQUZaO0tBREYsQ0FBQSxDQUFBO1dBSUEsY0FBYyxDQUFDLEdBQWYsQ0FBbUIsUUFBbkIsRUFBNkIsTUFBN0IsRUFBcUMsRUFBckMsRUFMUTtFQUFBLENBQVYsQ0FGQSxDQUFBOztBQUFBLEVBU0EsUUFBQSxHQUFXLFNBQUMsTUFBRCxFQUFTLFlBQVQsRUFBdUIsU0FBdkIsRUFBa0MsTUFBbEMsR0FBQTtBQUVULFFBQUEsS0FBQTtBQUFBLElBQUEsS0FBQSxHQUFRLFNBQUEsR0FBQTthQUNOLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLE1BQU0sQ0FBQyxNQUFQLENBQWMsT0FBZCxDQUNkLENBQUMsRUFEYSxDQUNWLE1BRFUsRUFDRixTQUFBLEdBQUE7QUFDVixRQUFBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLElBQUMsQ0FBQSxHQUFELENBQUssTUFBTSxDQUFDLEtBQVosQ0FBa0IsQ0FBQyxJQUFJLENBQUMsS0FBeEIsQ0FBOEIsR0FBOUIsQ0FBakIsQ0FBQTtlQUNBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLE1BQU0sQ0FBQyxNQUFQLENBQWUsU0FBQSxHQUFRLE1BQU0sQ0FBQyxLQUE5QixDQUNmLENBQUMsRUFEYyxDQUNYLE1BRFcsRUFDSCxTQUFBLEdBQUE7aUJBQ1YsTUFBTSxDQUFDLElBQVAsR0FBYyxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQU0sQ0FBQyxLQUFyQixFQURKO1FBQUEsQ0FERyxFQUZQO01BQUEsQ0FERSxFQURWO0lBQUEsQ0FBUixDQUFBO0FBQUEsSUFRQSxNQUFNLENBQUMsV0FBUCxHQUFxQixTQUFDLENBQUQsR0FBQTtBQUNuQixNQUFBLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLElBQWhCLENBQUE7QUFBQSxNQUNBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsQ0FBQSxJQUFLLE9BRHBCLENBQUE7QUFBQSxNQUVBLFNBQVMsQ0FBQyxJQUFWLENBQWdCLFFBQUEsR0FBTyxNQUFNLENBQUMsS0FBOUIsQ0FGQSxDQUFBO0FBR0EsTUFBQSxJQUFZLE1BQU0sQ0FBQyxZQUFQLEtBQXVCLFdBQW5DO2VBQUEsS0FBQSxDQUFBLEVBQUE7T0FKbUI7SUFBQSxDQVJyQixDQUFBO0FBQUEsSUFjQSxNQUFNLENBQUMsT0FBUCxHQUFpQixTQUFDLEdBQUQsR0FBQTthQUNmLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLElBREQ7SUFBQSxDQWRqQixDQUFBO0FBQUEsSUFpQkEsTUFBTSxDQUFDLFNBQVAsR0FBbUIsU0FBQSxHQUFBO0FBQ2pCLE1BQUEsSUFBRyxNQUFNLENBQUMsV0FBUCxJQUF1Qix1QkFBMUI7QUFDRSxRQUFBLE1BQU0sQ0FBQyxXQUFQLEdBQXFCLEtBQXJCLENBQUE7ZUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLFFBQVosRUFBc0IsTUFBTSxDQUFDLEtBQTdCLEVBQW9DLE1BQU0sQ0FBQyxNQUEzQyxFQUZGO09BRGlCO0lBQUEsQ0FqQm5CLENBQUE7QUFBQSxJQXNCQSxNQUFNLENBQUMsR0FBUCxDQUFXLFNBQVgsRUFBc0IsS0FBdEIsQ0F0QkEsQ0FBQTtXQXVCQSxNQUFNLENBQUMsV0FBUCxDQUFtQixZQUFZLENBQUMsS0FBaEMsRUF6QlM7RUFBQSxDQVRYLENBQUE7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbIm5nID0gYW5ndWxhci5tb2R1bGUgJ215QXBwJ1xuXG5uZy5jb25maWcgKCRzdGF0ZVByb3ZpZGVyLCBuYXZiYXJQcm92aWRlcikgLT5cbiAgJHN0YXRlUHJvdmlkZXIuc3RhdGUgJ2RhdGEnLFxuICAgIHVybDogJy9kYXRhLzp0YWJsZSdcbiAgICB0ZW1wbGF0ZVVybDogJy9kYXRhL2RhdGEuaHRtbCdcbiAgICBjb250cm9sbGVyOiBkYXRhQ3RybFxuICBuYXZiYXJQcm92aWRlci5hZGQgJy9kYXRhLycsICdEYXRhJywgMzVcblxuZGF0YUN0cmwgPSAoJHNjb3BlLCAkc3RhdGVQYXJhbXMsICRsb2NhdGlvbiwgamVlYnVzKSAtPlxuICAjIEZJWE1FOiB0aGlzIGdldHMgY2FsbGVkIGZhciB0b28gb2Z0ZW4sIGFuZCB0aGVyZSdzIG5vIGNsZWFudXAgeWV0IVxuICBzZXR1cCA9IC0+XG4gICAgJHNjb3BlLnRhYmxlcyA9IGplZWJ1cy5hdHRhY2ggJ3RhYmxlJ1xuICAgICAgLm9uICdzeW5jJywgLT5cbiAgICAgICAgJHNjb3BlLmNvbEluZm8gPSBAZ2V0KCRzY29wZS50YWJsZSkuYXR0ci5zcGxpdCAnICdcbiAgICAgICAgJHNjb3BlLmNvbHVtbnMgPSBqZWVidXMuYXR0YWNoIFwiY29sdW1uLyN7JHNjb3BlLnRhYmxlfVwiXG4gICAgICAgICAgLm9uICdzeW5jJywgLT5cbiAgICAgICAgICAgICRzY29wZS5kYXRhID0gamVlYnVzLmF0dGFjaCgkc2NvcGUudGFibGUpXG4gICAgICBcbiAgJHNjb3BlLmNoYW5nZVRhYmxlID0gKHQpIC0+XG4gICAgJHNjb3BlLmN1cnNvciA9IG51bGxcbiAgICAkc2NvcGUudGFibGUgPSB0IG9yICd0YWJsZSdcbiAgICAkbG9jYXRpb24ucGF0aCBcIi9kYXRhLyN7JHNjb3BlLnRhYmxlfVwiXG4gICAgc2V0dXAoKSAgaWYgJHNjb3BlLnNlcnZlclN0YXR1cyBpcyAnY29ubmVjdGVkJ1xuXG4gICRzY29wZS5lZGl0Um93ID0gKHJvdykgLT5cbiAgICAkc2NvcGUuY3Vyc29yID0gcm93XG4gICAgXG4gICRzY29wZS5kZWxldGVSb3cgPSAtPlxuICAgIGlmICRzY29wZS5hbGxvd0RlbGV0ZSBhbmQgJHNjb3BlLmN1cnNvcj9cbiAgICAgICRzY29wZS5hbGxvd0RlbGV0ZSA9IGZhbHNlXG4gICAgICBjb25zb2xlLmxvZyAnREVMRVRFJywgJHNjb3BlLnRhYmxlLCAkc2NvcGUuY3Vyc29yXG5cbiAgJHNjb3BlLiRvbiAnd3Mtb3BlbicsIHNldHVwXG4gICRzY29wZS5jaGFuZ2VUYWJsZSAkc3RhdGVQYXJhbXMudGFibGVcbiJdfQ==
